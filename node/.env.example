# ==============================================
# PRICE CHECKER CONFIGURATION
# ==============================================

# Run mode: 'full' (API + workers), 'api' (API only), 'worker' (workers only)
# - Price Server: MODE=api
# - Your PC: MODE=worker
MODE=full

# ==============================================
# DATABASE TYPE
# ==============================================
# Options: 'postgres' (default) or 'sqlite'
DB_TYPE=postgres

# ==============================================
# PRICE SERVER DATABASE (prices, job_queue, etc.)
# PostgreSQL - used when DB_TYPE=postgres
# ==============================================
PG_HOST=localhost
PG_PORT=5432
PG_DATABASE=cyber_prices
PG_USER=
PG_PASSWORD=

# ==============================================
# PRICE SERVER DATABASE - SQLite
# Used when DB_TYPE=sqlite
# ==============================================
SQLITE_DATABASE=./data/prices.db
SQLITE_VERBOSE=false

# ==============================================
# MAIN BACKEND DATABASE (competitor_price_sources, products)
# Always PostgreSQL (Laravel backend)
# ==============================================
# If same as above, leave these empty (will use PG_* values)
MAIN_DB_HOST=
MAIN_DB_PORT=
MAIN_DB_NAME=cyber
MAIN_DB_USER=
MAIN_DB_PASSWORD=

# ==============================================
# SSH TUNNELS FOR REMOTE DATABASES
# ==============================================
# Enable SSH tunneling
SSH_ENABLED=false

# --- Tunnel for Price Server Database ---
# Option 1: Use SSH config name from ~/.ssh/config
SSH_PRICES_CONFIG_NAME=cyber-server
# Option 2: Direct SSH config (if not using config name)
#SSH_PRICES_HOST=server.example.com
#SSH_PRICES_PORT=22
#SSH_PRICES_USER=user
#SSH_PRICES_KEY_PATH=~/.ssh/id_rsa
# Tunnel ports
SSH_PRICES_LOCAL_PORT=15432
SSH_PRICES_REMOTE_HOST=localhost
SSH_PRICES_REMOTE_PORT=5432

# --- Tunnel for Main Backend Database ---
# Option 1: Use SSH config name from ~/.ssh/config
SSH_MAIN_CONFIG_NAME=cyber-server
# Option 2: Direct SSH config (if not using config name)
#SSH_MAIN_HOST=server.example.com
#SSH_MAIN_PORT=22
#SSH_MAIN_USER=user
#SSH_MAIN_KEY_PATH=~/.ssh/id_rsa
# Tunnel ports
SSH_MAIN_LOCAL_PORT=15433
SSH_MAIN_REMOTE_HOST=localhost
SSH_MAIN_REMOTE_PORT=5432

# ==============================================
# API SERVER
# ==============================================
API_PORT=3003
API_SECRET=your-api-secret-key

# ==============================================
# WORKERS
# ==============================================
WORKER_COUNT=3
BROWSER_HEADLESS=true

# Source filtering - 'local', 'international', or 'all'
SOURCES=all

# ==============================================
# SCHEDULING
# ==============================================
CHECK_INTERVAL=21600          # 6 hours (in seconds)
FRESHNESS_THRESHOLD=1800      # 30 minutes (in seconds)
PRODUCT_SYNC_INTERVAL=3600000 # 1 hour (in ms)

# Request delays (in ms)
DELAY_BETWEEN_REQUESTS=2000